(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();class p{constructor(e,s,n,t){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(s);const i=document.importNode(this.templateElement.content,!0);this.element=i.firstElementChild,t&&(this.element.id=t),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function d(r){let e=!0;return r.required&&(e=e&&r.value.toString().trim().length!==0),r.minLength!=null&&typeof r.value=="string"&&(e=e&&r.value.length>=r.minLength),r.maxLength!=null&&typeof r.value=="string"&&(e=e&&r.value.length<=r.maxLength),r.min!=null&&typeof r.value=="number"&&(e=e&&r.value>=r.min),r.max!=null&&typeof r.value=="number"&&(e=e&&r.value<=r.max),e}function c(r,e,s){const n=s.value;return{configurable:!0,enumerable:!1,get(){return n.bind(this)}}}var l=(r=>(r[r.ACTIVE=0]="ACTIVE",r[r.FINISHED=1]="FINISHED",r))(l||{});class v{constructor(e,s,n,t,i){this.id=e,this.title=s,this.description=n,this.people=t,this.status=i}}class y{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class h extends y{constructor(){super(),this.projects=[]}static getInstance(){return this.instance?this.instance:(this.instance=new h,this.instance)}addProject(e,s,n){const t=new v(Math.random().toString(),e,s,n,l.ACTIVE);this.projects.push(t),this.updateListeners()}moveProject(e,s){const n=this.projects.find(t=>t.id===e);n&&n.status!==s&&(n.status=s,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const u=h.getInstance();var E=Object.defineProperty,j=Object.getOwnPropertyDescriptor,P=(r,e,s,n)=>{for(var t=n>1?void 0:n?j(e,s):e,i=r.length-1,o;i>=0;i--)(o=r[i])&&(t=(n?o(e,s,t):o(t))||t);return n&&t&&E(e,s,t),t};class m extends p{constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,s=this.descriptionInputElement.value,n=this.peopleInputElement.value,t={value:e,required:!0},i={value:s,required:!0,minLength:5},o={value:+n,required:!0,min:1,max:5};if(!d(t)||!d(i)||!d(o)){alert("Invalid input, please try again");return}else return[e,s,+n]}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const s=this.gatherUserInput();if(Array.isArray(s)){const[n,t,i]=s;u.addProject(n,t,i),this.clearInputs()}}}P([c],m.prototype,"submitHandler",1);var L=Object.defineProperty,H=Object.getOwnPropertyDescriptor,O=(r,e,s,n)=>{for(var t=n>1?void 0:n?H(e,s):e,i=r.length-1,o;i>=0;i--)(o=r[i])&&(t=(n?o(e,s,t):o(t))||t);return n&&t&&L(e,s,t),t};class g extends p{constructor(e,s){super("single-project",e,!1,s.id),this.project=s,this.configure(),this.renderContent()}get persons(){return this.project.people===1?"1 person":`${this.project.people} persons`}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(){console.log("DragEnd")}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").innerText=this.project.title,this.element.querySelector("h3").innerText=this.persons+" assigned",this.element.querySelector("p").innerText=this.project.description}}O([c],g.prototype,"dragStartHandler",1);var I=Object.defineProperty,S=Object.getOwnPropertyDescriptor,f=(r,e,s,n)=>{for(var t=n>1?void 0:n?S(e,s):e,i=r.length-1,o;i>=0;i--)(o=r[i])&&(t=(n?o(e,s,t):o(t))||t);return n&&t&&I(e,s,t),t};class a extends p{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&e.dataTransfer.types[0]==="text/plain"&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dragLeaveHandler(){this.element.querySelector("ul").classList.remove("droppable")}dropHandler(e){const s=e.dataTransfer.getData("text/plain");u.moveProject(s,this.type==="active"?l.ACTIVE:l.FINISHED)}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),u.addListener(e=>{const s=e.filter(n=>this.type==="active"?n.status===l.ACTIVE:n.status===l.FINISHED);this.assignedProjects=s,this.renderProjects()})}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}renderProjects(){const e=document.getElementById(`${this.type}-projects-list`);e.innerHTML="";for(const s of this.assignedProjects)new g(this.element.querySelector("ul").id,s)}}f([c],a.prototype,"dragOverHandler",1);f([c],a.prototype,"dragLeaveHandler",1);f([c],a.prototype,"dropHandler",1);new m;new a("active");new a("finished");
